---
title: 画質を最適化するためのベストプラクティス
description: 画質を最適化するためのベストプラクティスを学びます。
contentOwner: admin
content-type: reference
products: SG_EXPERIENCEMANAGER/Dynamic-Media-Classic
geptopics: SG_SCENESEVENONDEMAND_PK/categories/master_files
feature: Dynamic Media Classic，アセット管理
role: Business Practitioner
exl-id: 3c50e706-b9ed-49db-8c08-f179de52b9cf
source-git-commit: 31ac96e6fd11c47284d58540f5ec0135f0e6223b
workflow-type: tm+mt
source-wordcount: '1465'
ht-degree: 55%

---

# 画質を最適化するためのベストプラクティス{#best-practices-for-optimizing-the-quality-of-your-images}

許容範囲内の結果のレンダリングには多数の要因が関係することから、画質の最適化に時間がかかることもあります。知覚される画質は各個人で異なるので、結果はある程度主観的なものと言えます。構造的に実験を行うことが重要です。

Dynamic Media Classicには、画像を調整および最適化し、結果をレンダリングするための、100を超える画像サービングコマンドが含まれています。 重要なコマンドおよびベストプラクティスを使用して、このプロセスを効率化し、良い結果をすばやく得るために、次のガイドラインが役に立ちます。

[スマートイメージング](https://experienceleague.adobe.com/docs/experience-manager-65/assets/dynamic/imaging-faq.html#dynamic)も参照してください。

## 画像形式（&amp;fmt=）のベストプラクティス {#best-practices-for-image-format-fmt}

* 良い画質および扱いやすいサイズと幅で画像を配信するには、JPG または PNG が最良の選択肢です。
* URLにformatコマンドが指定されていない場合、Dynamic Media Image Servingはデフォルトで配信用にJPGに設定されます。
* JPG は 10:1 の比率で圧縮され、通常は比較的小さい画像ファイルサイズになります。PNGは、画像に空の背景が含まれる場合を除き、約2:1の比率で圧縮されます。 ただし、一般的に PNG ファイルのサイズは JPG ファイルよりも大きくなります。
* JPG は非可逆圧縮を使用します。この方式では、圧縮中に画像要素（ピクセル）が消失します。一方、PNG は可逆圧縮を使用します。
* JPG では、シャープなエッジとコントラストを持つ人工的な画像よりも写実的な画像の方がより忠実に圧縮されます。
* 画像に透明部分が含まれる場合は、PNG を使用します。JPG では透明化がサポートされません。

画像形式のベストプラクティスとして、まずは最も一般的な設定`&fmt=JPG`を使用します。

## 画像サイズのベストプラクティス {#best-practices-for-image-size}

画像サイズの動的な縮小は、Dynamic Media Image Servingで実行される最も一般的なタスクの1つです。 このタスクでは、サイズを指定し、さらにオプションとして画像の縮小に使用するダウンサンプリングモードを指定します。

* 画像のサイズ設定に関する最も簡単で最適なアプローチは、`&wid=<value>`と`&hei=<value>`を使用するか、`&hei=<value>`のみを使用することです。 これらのパラメーターにより、縦横比に応じて画像の幅が自動的に設定されます。
* `&resMode=<value>` は、ダウンサンプリングに使用するアルゴリズムを制御します。`&resMode=sharp2`から始めます。 この値により、最良の画質になります。ダウンサンプリング値`=bilin`を使用する方が速くなりますが、通常はアーティファクトのエイリアシングがおこなわれます。

画像のサイズ設定のベストプラクティスとして、`&wid=<value>&hei=<value>&resMode=sharp2`または`&hei=<value>&resMode=sharp2`を使用します。

## 画像へのシャープ適用のベストプラクティス {#best-practices-for-image-sharpening}

画像へのシャープ適用は、Web サイト上の画像を管理する上で最も複雑な側面であり、ミスが多く起きるところです。次の役立つリソースを参照して、Dynamic Media Classicでのシャープニングとアンシャープマスクの仕組みについて詳しく学びます。

ベストプラクティスに関するホワイトペーパー[Dynamic Media ClassicおよびImage ServerでのAdobeのシャープニング](/help/assets/s7_sharpening_images.pdf)。

<!-- Give a 404 See also [Sharpening an image with unsharp mask](https://helpx.adobe.com/photoshop/atv/cs6-tutorials/sharpening-an-image-with-unsharp-mask.html). -->

Dynamic Media Classicを使用すると、取り込み時、配信時またはその両方で画像をシャープにできます。 ただし、通常は、一方の方法のみを使用して画像をシャープにしますが、両方を使用することはできません。 通常は、配信時に URL 上の画像にシャープを適用すると最良の結果を得られます。

画像へのシャープの適用に使用できる方法は次の 2 つあります。

* シンプルシャープニング(`&op_sharpen`) - Photoshopで使用するシャープニングフィルターと同様に、シンプルシャープニングでは、動的なサイズ変更の後に、画像の最終表示形に対して基本的なシャープニングを適用します。 ただし、この方法にはユーザーが設定できる項目はありません。ベストプラクティスは、必要な場合を除き`&op_sharpen`を使用しないことです。
* アンシャープマスク(`&op_USM`) — アンシャープマスクは、業界標準のシャープニングフィルターです。 ベストプラクティスとして、次のガイドラインに従って、アンシャープマスクを使用して画像にシャープを適用します。アンシャープマスクでは、次の 3 つのパラメーターを制御できます。

   * `&op_sharpen=amount,radius,threshold`

      * `amount`（0 ～ 5、効果の強度）
      * `radius`（0 ～ 250、シャープが適用されるオブジェクト周囲に描画される「シャープ線」の幅、ピクセル単位）

         `radius` パラメーターと `amount` パラメーターは互いに反作用することに注意してください。`radius`を減らすことは、`amount`を増やすことで補うことができます。 `Radius` ではより細かい制御が可能であり、値を低く設定すると、端のピクセルだけがシャープになり、高く設定すると広範囲のピクセルがシャープになります。

      * `threshold` （0～255、効果の感度）

         このパラメーターは、シャープにされるピクセルが周囲の領域とどの程度違えば、そのピクセルをエッジのピクセルと見なしてフィルターによりシャープにするかを決定するものです。しきい値は、肌のトーンのような類似した色の領域に過度なシャープが適用されることを防ぐために使用できます。例えば、しきい値を 12 にした場合、肌のトーンの明るさにわずかな差があっても無視して「ノイズ」が加わるのを防ぎながら、まつげと肌が隣り合う場所など、コントラストの高い領域に対してエッジコントラストを追加することができます。

         フィルターで使用するベストプラクティスを含め、これら3つのパラメーターの設定方法について詳しくは、Adobe Scene7 Publishing SystemおよびImage Serverでの[画像のシャープニング](/help/assets/s7_sharpening_images.pdf)を参照してください。

      * Dynamic Media Classicでは、4番目のパラメーターを制御することもできます。モノクロ(`0,1`) このパラメーターは、アンシャープマスクが各カラーコンポーネントに個別に適用されるか（値 `0` を使用）、画像の明るさ／適用度に適用されるか（値 `1` を使用）を示します。

ベストプラクティスとして、まずはアンシャープマスクの radius パラメーターを使用します。はじめに使用できる radius 設定は次のとおりです。

* Web サイト：0.2 ～ 0.3 pixel
* 写真印刷（250 ～ 300 ppi）：0.3 ～ 0.5 pixel
* オフセット印刷（266 ～ 300 ppi）：0.7 ～ 1.0 pixel
* カンバス印刷（150 ppi）：1.5 ～ 2.0 pixel

amount を 1.75 から 4 まで徐々に増やします。シャープ適用で必要な効果が得られない場合は、radius を小数単位で増やして、もう一度 amount を 1.75 ～ 4 の間で動かします。必要に応じて繰り返します。

monochrome パラメーター設定は 0 のままにします。

## JPEG 圧縮（&amp;qlt=）のベストプラクティス {#best-practices-for-jpeg-compression-qlt}

* このパラメーターは JPG エンコーディングの画質を制御します。値を高く設定すると画質は上がりますがファイルサイズが大きくなり、低く設定すると画質は下がりますがファイルサイズが小さくなります。このパラメーターの範囲は 0 ～ 100 です。
* 高画質を目的として最適化する場合にも、このパラメーターの値を 100 以外に設定してください。90 や 95 の設定と 100 の設定の違いはほぼ認識できない程度ですが、100 を設定すると画像ファイルのサイズが不必要に増加します。したがって、画質を最適化しながら画像ファイルが大きくなりすぎないようにするには、`qlt=`の値を90または95に設定します。
* 画像ファイルサイズを小さくしつつ、画質を許容できるレベルに保つよう最適化するには、`qlt=`の値を80に設定します。 70 ～ 75 以下の値に設定すると、画質が大幅に低下します。
* ベストプラクティスとして、間を取るには、`qlt=`の値を85に設定します。
* `qlt=` = での chroma フラグの使用

   * `qlt=`パラメーターには、RGB色度のダウンサンプリングを通常の値`,0`（デフォルト）で有効にするか、値`,1`で無効にする第2の設定があります。
   * 簡易な設定を維持するために、まずはRGB色度のダウンサンプリングをオフにします( `,1`)。 この設定により通常は画質が上がります。特にシャープなエッジやコントラストを多く含む人工的な画像ではそうなります。

JPG圧縮のベストプラクティスとして、`&qlt=85,0`を使用します。

## JPEG サイズ（&amp;jpegSize=）のベストプラクティス {#best-practices-for-jpeg-sizing-jpegsize}

`jpegSize`パラメーターは、メモリ容量が限られているデバイスに配信する画像が特定のサイズを超えないようにする場合に役立ちます。

* このパラメーターはキロバイト単位で設定します(`jpegSize=<size_in_kilobytes>`)。 このパラメーターには、画像配信で許可される最大サイズを定義します。
* `&jpegSize=` は、JPG圧縮パラメーターと相互に作用しま `&qlt=`す。指定されたJPG圧縮パラメーター(`&qlt=`)でのJPG応答が`jpegSize`の値を超えない場合、画像は定義どおりに`&qlt=`で返されます。 それ以外の場合は、 `&qlt=`は徐々に減らされ、画像が許容される最大サイズに収まるか、またはシステムによってそのサイズに収まらないと判断されてエラーが返されます。

ベストプラクティスとして、`&jpegSize=`を設定し、メモリ容量が限られているデバイスにJPG画像を配信する場合は、パラメーター`&qlt=`を追加します。

## ベストプラクティスのまとめ {#best-practices-summary}

ベストプラクティスとして、高画質と小さいファイルサイズの両方を達成するために、まずは次のパラメーターの組み合わせを使用します。

`fmt=jpg&qlt=85,0&resMode=sharp2&op_usm=1.75,0.3,2,0`

この設定の組み合わせによって、ほとんどの状況で良好な結果が得られます。

画像をさらに最適化する必要がある場合は、シャープ適用（アンシャープマスク）パラメーターを徐々に微調整します。そのために、まずは radius を 0.2 または 0.3 に設定します。次に、amount を 1.75 から最大 4（Photoshop での 400% に相当）の範囲で徐々に増やします。求められる結果が得られたかを確認します。

シャープの結果にまだ満足できない場合は、radius を小数単位で増やします。小数単位で増やすたびに、もう一度 amount を 1.75 から始め、徐々に 4 まで増やします。求められる結果が得られるまで、このプロセスを繰り返します。上記の値は、制作スタジオで検証されてきたアプローチですが、他の値から始めて、別の方法に従っても問題ありません。ユーザーが満足できる結果であるかどうかは主観的な問題であるので、構造化された実験が重要になります。

実験を行う際に、ワークフローを最適化するには、次の一般的な推奨事項が役立ちます。

* Dynamic Media Classic URLで直接、またはDynamic Media Classicの画像調整機能を使用して、様々なパラメーターをリアルタイムでテストしてみます。 後者は、調整操作のリアルタイムプレビューを提供します。
* ベストプラクティスとして、Dynamic Media画像サービングコマンドを画像プリセットにグループ化できます。 画像プリセットは基本的に、`$thumb_low$`や`&product_high$`などのカスタムプリセット名を含むURLコマンドマクロです。 URLパス内のカスタムプリセット名は、これらのプリセットを呼び出します。 この機能により、Web サイト上での様々な画像使用パターンに関するコマンドおよび画質設定を管理でき、URL 全体の長さを短縮することもできます。
* Dynamic Media Classicでは、取り込み時に画像のシャープを適用するなど、画質を調整するより高度な方法も提供されています。 レンダリング結果のさらなる調整と最適化がオプションとなる高度な使用例については、Adobe Professional Servicesがお客様向けにカスタマイズした見識とベストプラクティスを提供します。
